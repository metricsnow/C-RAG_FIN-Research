# Development Framework v2 - Cursor AI Rules

## Framework-Specific Rules
- Follow persona switching patterns consistently
- Maintain state persistence across persona switches  
- Use quality gates for all persona activations
- Follow documentation standards (Google style docstrings)
- Place all documentation in docs/ folder
- Use lowercase naming for documentation files

## File Output Protocol (CRITICAL)
- **Default Behavior**: Provide all analysis, summaries, and insights directly in chat
- **File Creation**: Only create `.md` files when user explicitly asks to save output as a file
- **Examples of when NOT to create files**:
  - "Analyze this codebase" → Provide analysis in chat
  - "Research this topic" → Provide research in chat
  - "Summarize findings" → Provide summary in chat
- **Examples of when to create files**:
  - "Create a file with this analysis" → Create `.md` file in `docs/` folder
  - "Save this summary to a file" → Create `.md` file in `docs/` folder
- **File Placement**: If analysis files are created, they MUST go in `docs/` folder

## Context Engineering Protocol
- Use @-symbol for precise context specification
- Reference specific files: @filename.ts
- Reference folders: @folder/
- Reference code symbols: @functionName
- Always provide explicit context for better AI understanding
- Enable self-gathering context for dynamic understanding
- Allow AI to add debugging statements for analysis
- Support runtime behavior analysis

## Code Standards
- Use TypeScript strict mode, avoid 'any' type
- Use functional components with hooks, not class components
- All async functions must have try-catch blocks
- Use meaningful variable and function names
- Add comments for complex business logic only
- Implement proper logging for debugging

## Security Requirements (CRITICAL)
- **Environment Variables**: ALL credentials MUST be in `.env` file only
  - API keys, database credentials, secret keys, tokens, passwords
  - NEVER hardcode credentials in source code
  - Always use environment variables loaded from `.env` file
- **`.env` File Management**:
  - `.env` file MUST exist and be used in all projects
  - `.env` file MUST be in `.gitignore` (already configured in `.cursorignore`)
  - `.env` file MUST NEVER be committed to GitHub
  - Create `.env.example` with placeholder values as template
  - Document required environment variables in documentation
- **Credential Protection**:
  - No hardcoded credentials in code
  - All credentials loaded from environment variables
  - Validate `.env` file is in `.gitignore` before commits
- **General Security**:
  - Validate all user inputs
  - Use parameterized queries
  - Implement OWASP compliance
  - Handle secrets securely
  - NEVER allow direct AI access to critical databases
  - Use deterministic tools for critical infrastructure
  - Always create backups before AI operations
  - Test scripts on cloned data only
  - Maintain awareness of AI non-deterministic nature

## Performance Requirements
- Optimize database queries
- Implement caching strategies
- Monitor performance metrics
- Use lazy loading where appropriate

## Persona-Specific Guidelines
- Mission Analyst: Focus on deep research, MCP Context7 integration, web search validation
- Mission Planner: Emphasize technical architecture, feasibility analysis, task breakdown
- Mission Executor: Prioritize code implementation, testing, documentation
- Mission-QA: Focus on quality validation, security review, performance checks
- Mission Challenger: Emphasize optimization, assumption validation, efficiency improvements

## File Organization Rules (CRITICAL)
- **Documentation**: ALL documentation files MUST be in `docs/` folder
- **Utility Functions**: Reusable utility functions MUST be in `utils/` folder
- **Test Scripts**: ALL test scripts MUST be in `test/` or `tests/` folder
- **Analysis Files**: NEVER create summary/analysis `.md` files automatically
  - Provide analysis directly in chat by default
  - Only create `.md` analysis files when user explicitly requests to save output as a file
  - If analysis files are created, they MUST go in `docs/` folder

## Documentation Standards
- All documentation must be in docs/ folder
- Use lowercase filenames with descriptive names
- Include comprehensive docstrings (Google style)
- Cross-reference related documentation
- Maintain up-to-date README files in subfolders

## Plan Preservation Protocol
- Include full plans verbatim in stories
- NEVER summarize or condense technical details
- Preserve all code examples and specifications
- Maintain original formatting and structure
- Ensure complete technical detail preservation

## MCP Integration Protocol
- Use Context7 for real-time documentation access
- Access 4000+ open-source libraries documentation
- Ensure up-to-date information for all implementations
- Validate against official documentation sources
- Integrate MCP servers for external tools and data sources

## Quality Gates
- Pre-execution validation for all personas
- Post-execution quality assessment
- Template compliance checking
- File placement validation
- Standards compliance verification
- MCP integration validation
- Context engineering verification
